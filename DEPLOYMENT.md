# æ‰“ç‰Œè®°è´¦åŠ©æ‰‹ - é¡¹ç›®äº¤ä»˜è¯´æ˜

## âœ… é¡¹ç›®å®Œæˆæƒ…å†µ

å·²å®ŒæˆåŸºç¡€æ¶æ„å’Œæ ¸å¿ƒæ¡†æ¶ï¼ŒåŠŸèƒ½æ¡†æ¶æ­å»ºå®Œæ¯•ï¼Œå¯ç»§ç»­å¼€å‘å®Œå–„ã€‚

### å·²å®Œæˆçš„éƒ¨åˆ†

1. âœ… **é¡¹ç›®åˆå§‹åŒ–**
   - package.jsoné…ç½®
   - Viteæ„å»ºé…ç½®
   - é¡¹ç›®ç›®å½•ç»“æ„

2. âœ… **æ ¸å¿ƒå­˜å‚¨æ¨¡å—**
   - IndexedDBå°è£…ï¼ˆstorage.jsï¼‰
   - ç”¨æˆ·è¡¨ã€ç‰Œå±€è¡¨ã€è®°å½•è¡¨è®¾è®¡
   - ç¦»çº¿æ•°æ®å­˜å‚¨èƒ½åŠ›

3. âœ… **è·¯ç”±æ¡†æ¶**
   - Vue Routeré…ç½®
   - 4ä¸ªä¸»è¦é¡µé¢è·¯ç”±
   - åº•éƒ¨å¯¼èˆªæ 

4. âœ… **é¦–é¡µåŠŸèƒ½**
   - ç‰Œå±€åˆ—è¡¨å±•ç¤º
   - åˆ›å»ºç‰Œå±€åŠŸèƒ½
   - è¿›è¡Œä¸­/å·²ç»“æŸç‰Œå±€åˆ†ç±»
   - ç”¨æˆ·é€‰æ‹©å™¨
   - æ¸¸æˆç±»å‹é€‰æ‹©å™¨

5. âœ… **UIæ¡†æ¶**
   - Vantç»„ä»¶åº“é›†æˆ
   - ç§»åŠ¨ç«¯å“åº”å¼å¸ƒå±€
   - åŸºç¡€æ ·å¼è®¾ç½®

### éœ€è¦ç»§ç»­å¼€å‘çš„éƒ¨åˆ†

1. ğŸš§ **ç‰Œå±€è¯¦æƒ…é¡µ**ï¼ˆGameDetail.vueï¼‰
   - å®æ—¶ç§¯åˆ†æ¦œç»„ä»¶
   - è®°å½•å¾—åˆ†è¡¨å•
   - å†å²è½®æ¬¡åˆ—è¡¨
   - æˆªå›¾åˆ†äº«åŠŸèƒ½

2. ğŸš§ **å†å²è®°å½•é¡µ**ï¼ˆHistory.vueï¼‰
   - å†å²ç‰Œå±€åˆ—è¡¨
   - ç­›é€‰å’Œæœç´¢åŠŸèƒ½
   - è¯¦ç»†ç»Ÿè®¡

3. ğŸš§ **ç”¨æˆ·ç®¡ç†é¡µ**ï¼ˆUsers.vueï¼‰
   - ç”¨æˆ·åˆ—è¡¨
   - æ·»åŠ /ç¼–è¾‘/åˆ é™¤ç”¨æˆ·
   - ç”¨æˆ·ç»Ÿè®¡æ•°æ®

4. ğŸš§ **å…¶ä»–åŠŸèƒ½**
   - PWAé…ç½®ï¼ˆmanifest.jsonï¼‰
   - æ•°æ®å¯¼å‡º/å¯¼å…¥
   - æš—è‰²æ¨¡å¼æ”¯æŒ

## ğŸ“ é¡¹ç›®æ–‡ä»¶æ¸…å•

```
e:\bookking_kit\
â”œâ”€â”€ package.json             âœ… å·²åˆ›å»º
â”œâ”€â”€ vite.config.js           âœ… å·²åˆ›å»º
â”œâ”€â”€ index.html               âœ… å·²åˆ›å»º
â”œâ”€â”€ .gitignore               âœ… å·²åˆ›å»º
â”œâ”€â”€ README.md                âœ… å·²åˆ›å»º
â”œâ”€â”€ DEPLOYMENT.md            âœ… å·²åˆ›å»º
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.js              âœ… å·²åˆ›å»º
â”‚   â”œâ”€â”€ App.vue              âœ… å·²åˆ›å»º
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ Home.vue         âœ… å·²åˆ›å»ºï¼ˆå®Œæ•´ï¼‰
â”‚   â”‚   â”œâ”€â”€ GameDetail.vue   âœ… å·²åˆ›å»ºï¼ˆå ä½ï¼‰
â”‚   â”‚   â”œâ”€â”€ History.vue      âœ… å·²åˆ›å»ºï¼ˆå ä½ï¼‰
â”‚   â”‚   â””â”€â”€ Users.vue        âœ… å·²åˆ›å»ºï¼ˆå ä½ï¼‰
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ storage.js       âœ… å·²åˆ›å»ºï¼ˆå®Œæ•´ï¼‰
â”‚   â””â”€â”€ assets/
â”‚       â””â”€â”€ styles/
â”‚           â””â”€â”€ main.css     âœ… å·²åˆ›å»º
â””â”€â”€ public/                  âœ… ç›®å½•å·²åˆ›å»º
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd e:\bookking_kit
npm install
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—® http://localhost:3000

### 3. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

æ„å»ºäº§ç‰©åœ¨ `docs/` ç›®å½•

## ğŸ“– ä¸‹ä¸€æ­¥å¼€å‘å»ºè®®

### ä¼˜å…ˆçº§1ï¼šå®ç°ç‰Œå±€è¯¦æƒ…é¡µï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

**GameDetail.vue éœ€è¦å®ç°ï¼š**

```vue
<template>
  <div class="game-detail">
    <!-- ç‰Œå±€ä¿¡æ¯ -->
    <div class="game-info">
      <p>{{ game.gameName }}</p>
      <p>ç¬¬ {{ game.currentRound }} å±€</p>
    </div>

    <!-- å®æ—¶ç§¯åˆ†æ¦œ -->
    <ScoreBoard :scores="game.scores" :players="game.players" />

    <!-- è®°å½•æœ¬å±€å¾—åˆ†æŒ‰é’® -->
    <van-button type="primary" @click="showRecordForm = true">
      è®°å½•æœ¬å±€å¾—åˆ†
    </van-button>

    <!-- å†å²è½®æ¬¡åˆ—è¡¨ -->
    <RoundHistory :gameId="gameId" />

    <!-- è®°å½•å¾—åˆ†è¡¨å•ï¼ˆå¼¹çª—ï¼‰ -->
    <van-popup v-model:show="showRecordForm">
      <RecordForm @submit="onRecordSubmit" />
    </van-popup>

    <!-- ç»“æŸç‰Œå±€/æˆªå›¾åˆ†äº« -->
    <div class="actions">
      <van-button @click="endGame">ç»“æŸç‰Œå±€</van-button>
      <van-button @click="screenshot">æˆªå›¾åˆ†äº«</van-button>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import { useRoute } from 'vue-router'
import storage from '@/utils/storage'
import ScoreBoard from '@/components/ScoreBoard.vue'
import RecordForm from '@/components/RecordForm.vue'
import RoundHistory from '@/components/RoundHistory.vue'

const route = useRoute()
const gameId = ref(Number(route.params.id))
const game = ref(null)
const showRecordForm = ref(false)

onMounted(async () => {
  game.value = await storage.getById('games', gameId.value)
})

// è®°å½•å¾—åˆ†
async function onRecordSubmit(roundScores) {
  // æ›´æ–°ç´¯è®¡å¾—åˆ†
  for (const [userId, score] of Object.entries(roundScores)) {
    game.value.scores[userId] = (game.value.scores[userId] || 0) + score
  }
  game.value.currentRound++
  game.value.totalRounds++

  // ä¿å­˜ç‰Œå±€
  await storage.update('games', game.value)

  // ä¿å­˜è®°å½•
  await storage.add('records', {
    gameId: gameId.value,
    roundNumber: game.value.currentRound,
    timestamp: new Date().toISOString(),
    scores: roundScores
  })

  showRecordForm.value = false
}
</script>
```

### ä¼˜å…ˆçº§2ï¼šåˆ›å»ºå…¬å…±ç»„ä»¶

**src/components/ScoreBoard.vue**ï¼ˆç§¯åˆ†æ¦œï¼‰

```vue
<template>
  <div class="score-board">
    <h3>å®æ—¶ç§¯åˆ†æ¦œ</h3>
    <div class="player-list">
      <div
        v-for="(score, userId) in sortedScores"
        :key="userId"
        class="player-item"
      >
        <span class="rank">{{ getRank(userId) }}</span>
        <span class="name">{{ getUserName(userId) }}</span>
        <span class="score" :class="{ positive: score > 0, negative: score < 0 }">
          {{ score > 0 ? '+' : '' }}{{ score }}
        </span>
      </div>
    </div>
  </div>
</template>

<script setup>
import { computed } from 'vue'

const props = defineProps({
  scores: Object, // { userId: score }
  players: Array  // [userId1, userId2, ...]
})

// æŒ‰å¾—åˆ†æ’åº
const sortedScores = computed(() => {
  const entries = Object.entries(props.scores)
  return entries.sort((a, b) => b[1] - a[1])
})

function getRank(userId) {
  const index = sortedScores.value.findIndex(([id]) => id === userId)
  return index + 1
}

function getUserName(userId) {
  // ä»storageè·å–ç”¨æˆ·å
  return `ç©å®¶${userId}`
}
</script>

<style scoped>
.positive {
  color: #07c160;
}

.negative {
  color: #ee0a24;
}
</style>
```

### ä¼˜å…ˆçº§3ï¼šå®ç°æˆªå›¾åˆ†äº«åŠŸèƒ½

**src/utils/screenshot.js**

```javascript
export async function captureElement(elementId) {
  const html2canvas = await import('html2canvas')
  const element = document.getElementById(elementId)

  const canvas = await html2canvas.default(element, {
    backgroundColor: '#ffffff',
    scale: 2,
    useCORS: true
  })

  return canvas.toDataURL('image/png')
}

export function downloadImage(dataURL, filename) {
  const link = document.createElement('a')
  link.download = filename || `ç‰Œå±€ç»“ç®—_${Date.now()}.png`
  link.href = dataURL
  link.click()
}
```

## ğŸ¯ éƒ¨ç½²åˆ°GitHub Pages

### æ­¥éª¤1ï¼šæ¨é€åˆ°GitHub

```bash
# 1. åˆå§‹åŒ–Gitä»“åº“
cd e:\bookking_kit
git init
git add .
git commit -m "feat: åˆå§‹åŒ–æ‰“ç‰Œè®°è´¦é¡¹ç›®"

# 2. åœ¨GitHubåˆ›å»ºæ–°ä»“åº“
# ä»“åº“åï¼šbookking_kit
# ä¸å‹¾é€‰ä»»ä½•åˆå§‹åŒ–é€‰é¡¹

# 3. å…³è”è¿œç¨‹ä»“åº“
git remote add origin https://github.com/yourusername/bookking_kit.git
git branch -M main
git push -u origin main
```

### æ­¥éª¤2ï¼šé…ç½®GitHub Pages

1. è¿›å…¥GitHubä»“åº“é¡µé¢
2. ç‚¹å‡» Settings -> Pages
3. Source é€‰æ‹©ï¼šDeploy from a branch
4. Branch é€‰æ‹©ï¼šmain
5. Folder é€‰æ‹©ï¼š/docs
6. ç‚¹å‡» Save

### æ­¥éª¤3ï¼šæ„å»ºå¹¶éƒ¨ç½²

```bash
# æ„å»ºé¡¹ç›®
npm run build

# æäº¤æ„å»ºæ–‡ä»¶
git add docs
git commit -m "build: æ„å»ºç”Ÿäº§ç‰ˆæœ¬"
git push
```

### æ­¥éª¤4ï¼šè®¿é—®ç½‘ç«™

ç­‰å¾…1-2åˆ†é’Ÿåè®¿é—®ï¼š
```
https://yourusername.github.io/bookking_kit/
```

## ğŸ”§ å¼€å‘å»ºè®®

### 1. æ•°æ®ç»“æ„ç¤ºä¾‹

```javascript
// ç”¨æˆ·
{
  id: 1,
  nickname: "å¼ ä¸‰",
  avatar: "default.png",
  createdAt: "2026-01-19T10:00:00Z"
}

// ç‰Œå±€
{
  id: 1,
  gameName: "å‘¨æœ«éº»å°†",
  gameType: "éº»å°†",
  players: [1, 2, 3, 4],
  startTime: "2026-01-19T14:00:00Z",
  endTime: null,
  status: "playing",
  currentRound: 3,
  totalRounds: 3,
  scores: {
    "1": 500,
    "2": 200,
    "3": -100,
    "4": -600
  }
}

// è®°å½•
{
  id: 1,
  gameId: 1,
  roundNumber: 1,
  timestamp: "2026-01-19T14:30:00Z",
  scores: {
    "1": 100,
    "2": -50,
    "3": 50,
    "4": -100
  },
  winner: 1,
  note: "å¼ ä¸‰èƒ¡ç‰Œ"
}
```

### 2. æ¨èçš„npmåŒ…

```bash
# æˆªå›¾åŠŸèƒ½
npm install html2canvas

# å›¾è¡¨åŠŸèƒ½
npm install chart.js

# æ—¥æœŸå¤„ç†ï¼ˆå·²å®‰è£…ï¼‰
npm install dayjs

# PWAæ”¯æŒ
npm install vite-plugin-pwa -D
```

### 3. æµ‹è¯•æ•°æ®ç”Ÿæˆ

åœ¨å¼€å‘æ—¶å¯ä»¥æ·»åŠ æµ‹è¯•æ•°æ®ç”ŸæˆåŠŸèƒ½ï¼š

```javascript
// ç”Ÿæˆæµ‹è¯•ç‰Œå±€
async function generateTestGame() {
  const users = await storage.getAll('users')
  const playerIds = users.slice(0, 4).map(u => u.id)

  const gameId = await storage.add('games', {
    gameName: 'æµ‹è¯•ç‰Œå±€',
    gameType: 'éº»å°†',
    players: playerIds,
    startTime: new Date().toISOString(),
    status: 'playing',
    currentRound: 0,
    totalRounds: 0,
    scores: Object.fromEntries(playerIds.map(id => [id, 0]))
  })

  // ç”Ÿæˆ3å±€è®°å½•
  for (let i = 1; i <= 3; i++) {
    const roundScores = {}
    let total = 0
    playerIds.forEach((id, index) => {
      const score = index === 0 ? 100 : -30 - index * 10
      roundScores[id] = score
      total += score
    })

    await storage.add('records', {
      gameId,
      roundNumber: i,
      timestamp: new Date(Date.now() - (3 - i) * 3600000).toISOString(),
      scores: roundScores
    })
  }
}
```

## ğŸ“Š é¡¹ç›®äº®ç‚¹

1. **ç¦»çº¿ä¼˜å…ˆ**ï¼šä½¿ç”¨IndexedDBï¼Œæ— éœ€ç½‘ç»œè¿æ¥
2. **ç§»åŠ¨ç«¯ä¼˜åŒ–**ï¼šVant UIç»„ä»¶ï¼Œè§¦æ‘¸å‹å¥½
3. **å®æ—¶è®¡åˆ†**ï¼šå³æ—¶æ›´æ–°ç§¯åˆ†æ¦œ
4. **æ•°æ®æŒä¹…åŒ–**ï¼šæµè§ˆå™¨æœ¬åœ°å­˜å‚¨ï¼Œä¸ä¸¢å¤±æ•°æ®
5. **æ˜“äºéƒ¨ç½²**ï¼šGitHub Pageså…è´¹æ‰˜ç®¡

## ğŸ‰ æ€»ç»“

é¡¹ç›®åŸºç¡€æ¶æ„å·²å®Œæˆï¼Œæ ¸å¿ƒåŠŸèƒ½æ¡†æ¶å·²æ­å»ºã€‚æ‚¨å¯ä»¥ï¼š

1. **ç»§ç»­å¼€å‘**ï¼šæŒ‰ç…§ä¸Šè¿°å»ºè®®å®ç°å‰©ä½™é¡µé¢
2. **ç«‹å³éƒ¨ç½²**ï¼šæ¨é€åˆ°GitHubå¹¶é…ç½®Pages
3. **å¿«é€Ÿæµ‹è¯•**ï¼šè¿è¡Œ `npm run dev` æŸ¥çœ‹é¦–é¡µæ•ˆæœ

**ä¸‹ä¸€æ­¥é‡ç‚¹**ï¼šå®ç°GameDetail.vueé¡µé¢çš„å®æ—¶è®¡åˆ†åŠŸèƒ½ï¼

---

**ç¥å¼€å‘é¡ºåˆ©ï¼** ğŸš€
